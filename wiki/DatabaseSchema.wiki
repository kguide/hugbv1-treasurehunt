#summary Database schema in SQL format.

= Introduction =

This is the database schema for the android project.
If you wish to change anything contact the Hord!


= Database schema =
<pre>
drop table if exists users;
CREATE TABLE users (
	userId INT PRIMARY KEY AUTO_INCREMENT,
	username VARCHAR(100) NOT NULL UNIQUE,
	password CHAR(32) NOT NULL,
	lastLogin DATE NOT NULL,
	registerDate DATE NOT NULL,
	registered BOOL
) TYPE=MyISAM COLLATE=utf8_icelandic_ci;

drop table if exists games;
CREATE TABLE games (
	gameId INT PRIMARY KEY AUTO_INCREMENT,
	gameName VARCHAR(20) NOT NULL,
	ownerId INT NOT NULL,
	created DATE NOT NULL,
	expires DATE DEFAULT NULL,
	active BOOL DEFAULT TRUE,
	FOREIGN KEY (ownerId) REFERENCES users(userId)
) TYPE=MyISAM COLLATE=utf8_icelandic_ci;

drop table if exists gameCoordinates;
CREATE TABLE gameCoordinates (
	coordinateId INT NOT NULL,	
	gameId INT NOT NULL,
	latitude DOUBLE NOT NULL,
	longitude DOUBLE NOT NULL,
	FOREIGN KEY (gameId) REFERENCES games(gameId)
) TYPE=MyISAM COLLATE=utf8_icelandic_ci;

drop table if exists  gameMembers;
CREATE TABLE gameMembers (
	gameId INT NOT NULL,
	userId INT NOT NULL,
	joined DATE NOT NULL,
	finished BOOL DEFAULT FALSE NOT NULL,
	FOREIGN KEY (gameId) REFERENCES games(gameId),
	FOREIGN KEY (userId) REFERENCES users(userId)
) TYPE=MyISAM COLLATE=utf8_icelandic_ci;

drop table if exists gameHints;
CREATE TABLE gameHints (
	hintId INT NOT NULL,
	gameId INT NOT NULL,
	coordinateId INT NOT NULL,
	hintText TEXT,
	FOREIGN KEY(coordinateId) REFERENCES gameCoordinates(coordinateId),
	FOREIGN KEY (gameId) REFERENCES games(gameId)
) TYPE=MyISAM COLLATE=utf8_icelandic_ci;

drop table if exists gameScores;
CREATE TABLE gameScores (
	gameId INT NOT NULL,
	score INT DEFAULT '0',
	FOREIGN KEY(gameId) REFERENCES games(gameId)
) TYPE=MyISAM COLLATE=utf8_icelandic_ci;

drop table if exists userScores;
CREATE TABLE userScores (
	userId INT NOT NULL,
	score INT DEFAULT '0',
	locations  INT DEFAULT '0',
	FOREIGN KEY(userId) REFERENCES users(userId)
) TYPE=MyISAM COLLATE=utf8_icelandic_ci;
</pre>


= Sample Insert Data =
<pre>
INSERT INTO users (username,password,lastLogin,registerDate)VALUES ('test@test.is','098f6bcd4621d373cade4e832627b4f6','2009-10-15','2009-10-15');
INSERT INTO userScores(userId,score,locations) VALUES (1,2000,5);
INSERT INTO games (gameName,ownerId,created,expires) VALUES ('Test Game',1,'2009-10-15','2010-10-15');
INSERT INTO gameCoordinates (coordinateId,gameId,latitude,longitude) VALUES (1,1,64.138252,-21.926658);
INSERT INTO gameCoordinates (coordinateId,gameId,latitude,longitude) VALUES (2,1,64.142052,-21.927243);
INSERT INTO gameScores(gameId,score) VALUES (1,2000);
INSERT INTO gameMembers(gameId,userId,joined) VALUES (1,1,'2009-10-16');
INSERT INTO gameHints(hintId,gameId,coordinateId,hintText) VALUES (1,1,1,'Bygging kennd vid ljodskald');
INSERT INTO gameHints(hintId,gameId,coordinateId,hintText) VALUES (1,1,2,'Til hamingju!');
</pre>